var x=(t,e)=>()=>(t&&(e=t(t=0)),e);var y=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);function i(t,e,o=null){return o?t.hasAttribute(e)&&t.getAttribute(e)===o:t.hasAttribute("opacity")}var l,u,L,d,s,r,f,p=x(()=>{u="open-modal",L="close-modal",d="modal";r={modals:t=>{let e=t.target.closest("["+u+"]");if(e){if(l=e.getAttribute(u),l!=null&&l!=""){let o=document.querySelectorAll("["+d+'="'+l+'"].b-modal');o.length==1?(s=o[0],s.classList.add("opened")):o.length>1?console.error("Se ha encontrado "+o.length+" modales con el mismo valor "):console.error('No se ha encontrado una modal definida as\xED: modal="'+l+'"')}}else if(l&&s){let o=!t.target.closest("["+d+'="'+l+'"].b-modal [bx-content]'),a=t.target.closest("["+d+"].b-modal [bx-content] ["+L+"]"),m=t.target.closest("["+d+"].b-modal [bx-content] [maximize-modal]"),n=t.target.closest("["+d+'="'+l+'"].b-modal[persistent]');window.addEventListener("keydown",c=>{c.key==="Escape"&&s&&s.classList.contains("opened")&&(r.closePopupScreen(l),l=null,s=null)}),(a&&o&&!n||a||s&&o&&!n)&&r.closePopupScreen(l),s&&m&&s.classList.toggle("maximized")}},closePopupScreen:async t=>{let e=document.querySelector('.b-modal[modal="'+t+'"]');if(!e)return!1;e.classList.add("closed");let o=400,a=i(e,"fx","fade"),m=i(e,"fx","slide"),n=i(e,"fx","in-out"),c=i(e,"opacity");return a&&c||n&&c?o=600:(a||n||m)&&(o=300),await new Promise(g=>{setTimeout(()=>{e.classList.remove("opened"),e.classList.remove("closed"),console.log(o),g()},o)}),!0},init:()=>{document.body.addEventListener("click",function(t){r.modals(t)})}},f=r});var S=y((A,b)=>{p();var h=f;b.exports=h});export default S();
//# sourceMappingURL=boxy-modal.esm.js.map
